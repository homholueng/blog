---
title: Docker 应用数据的管理
tags:
  - Docker
  - Network
categories:
  - Docker
---

## 概述

容器中创建的文件默认会写入可写的容器层，这意味着：

- 这些数据会随着容器的销毁而消失
- 容器的可写层与当前宿主机耦合在了一起，想要将数据转移到别的地方比较麻烦
- 需要借助存驱动来对文件系统进行管理才能对容器的可写层进行写入，这与使用数据卷相比性能会差一些，因为多了一层抽象层。

Docker 针对数据存储的问题提供了两种解决方案：*volumn* 和 *bind mount*，这使得我们能够放心的将容器中产生的数据存储在宿主机中。

> 如果你的 Docker 运行在 Linux 上，那么你还有另外一种选择： *tmpfs mount*。

### 选择正确的挂载方式

不管你选择使用哪一种挂载方式，在容器内看起来都是一样的。但是从容器外的角度来看，这三种挂载方式的确存在不同，下图展示了三种挂载方式的区别：

{% asset_img types-of-mounts.png %}

- **Volume** 是由 Docker 管理的宿主机文件系统的一部分，非 Docker 进程一般不应该修改这部分数据。**Volume 是用于存储容器中数据的最好的方式。**
- **Bind Mount** 可以存储在宿主机中的任何位置，其甚至可以是一些重要的系统文件或目录。宿主机中的非 Docker 进程和其他容器能够随时修改这些数据。
- **`tmpfs` Mount** 存储在宿主机的内存中，这些数据并不会写入到宿主机的文件系统中。